
let apple_m1    true
let unix_x86_64 false

proc exit do
    let syscall_0 pop
    let syscall_number 1

    syscall
end

proc puts do
    over ptr

    let syscall_0 1
    let syscall_1 pop
    let syscall_2 pop

    unix_x86_64 if do let syscall_number 1 end
    apple_m1    if do let syscall_number 4 end

    syscall
end

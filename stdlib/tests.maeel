"std" include

fun test value supposed message (
    value supposed =

    30 message len - ~ padding

    array
        1 + (": OK" "." padding * " " message puts puts puts putsln) +
        0 + (": FAIL\n\n" "." padding * " " message puts puts puts putsln 1 0 %) +

    match!
)

array 1+ 2+ 3+ ~ lst

3 2 +             5              "add"  test
3 2 -             1              "sub"  test
3 2 *             6              "mul"  test
6 2 /             3              "div"  test
2 3 drop          2              "drop" test
2 3 dup take3     2 3 3 take3    "dup"  test
1 2 3 rot take3   3 1 2 take3    "rot"  test
2 3 over take3    2 3 2 take3    "over" test
1 2 3 swap take3  1 3 2 take3    "swap" test

4 fact            24             "factorial 4" test
5 fact            120            "factorial 5" test
6 fact            720            "factorial 6" test
7 fact            5040           "factorial 7" test

lst reverse       array 3+ 2+ 1+ "reverse"       test
array reverse     array          "empty reverse" test

1 4 range         lst            "range" test

1 5 range (
    dup fact swap fact1 "second factorial" test
) for

lst sum     6 "sum"     test
lst product 6 "product" test